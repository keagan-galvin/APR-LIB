<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CSS Tests</title>
    <!-- 3rd Party Plugins -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/solid.css" integrity="sha384-rdyFrfAIC05c5ph7BKz3l5NG5yEottvO/DQ0dCrwD8gzeQDjYBHNr1ucUpQuljos"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/brands.css" integrity="sha384-QT2Z8ljl3UupqMtQNmPyhSPO/d5qbrzWmFxJqmY7tqoTuT2YrQLEqzvVOP2cT5XW"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/fontawesome.css" integrity="sha384-u5J7JghGz0qUrmEsWzBQkfvc8nK3fUT7DCaQzNQ+q4oEXhGSx+P2OqjWsfIRB8QT"
        crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,700,700i" rel="stylesheet">

    <link href="styles.css" type="text/css" rel="stylesheet" />
    <link href="dataTable.css" type="text/css" rel="stylesheet" />

    <script defer src=".../../dist/jquery-1.12.4.min.js" type="text/javascript"></script>
    <script defer src="../../dist/dataTables/js/jquery.dataTables.min.js" type="text/javascript"></script>
    <script defer src="../../dist/dataTables/js/jszip.min.js" type="text/javascript"></script>
    <script defer src="../../dist/dataTables/js/dataTables.buttons.min.js" type="text/javascript"></script>
    <script defer src="../../dist/dataTables/js/buttons.html5.min.js" type="text/javascript"></script>

    <script defer src="../../dist/polyfills.min.js" type="text/javascript"></script>
    <script defer src="../../dist/lib.min.js" type="text/javascript"></script>
    <script defer src="../../dist/dataTables.min.js" type="text/javascript"></script>
</head>

<body>
    <main style="padding: 2rem">

        <div id="contact-grid" class="card animate" style="opacity: 0;">
            <div class="card-toolbar toolbar">
                <div class="search"><i class="fas fa-search"></i></div>
                <div class="options">
                    <button class="raised primary icon t-top t-sm" edit-contact contact-id="0" tooltip='Add Contact'>
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>
            <div class="card-content dataTables_wrapper">
                    <table class="data-table">
                        <thead>
                            <tr role="row">
                                <th>Name</th>
                                <th>Institution</th>
                                <th>Title</th>
                                <th>Email</th>
                                <th>Phone</th>
                            </tr>
                        </thead>
                    </table>
            </div>
        </div>
        
    </main>
</body>
<script defer>
    document.addEventListener("DOMContentLoaded", function () {
        const gridElement = document.querySelector('.card');
        var contactGrid = DataTableCard(gridElement, {
            columns: [{
                    data: "Name",
                    render: (data, type, row) => {
                        if (type == "sort" || type == 'type') return row.FirstName;
                        return `<a href='#' edit-contact='${row.ContactId}'>${row.FirstName} ${row.LastName}<i class="fas fa-edit hover-hide"></i></a>`;
                    }
                },
                {
                    data: "EntityName",
                },
                {
                    data: "ContactTypeId",
                    render: (data, type, row) => {
                        if (type == "sort" || type == 'type') return data;
                        let contactType = contactService.contactTypes.find(x => x.ContactTypeId ==
                            data);
                        return DefaultValue(contactType.ContactDescription);
                    }
                },
                {
                    data: "Email",
                },
                {
                    data: null,
                    render: (data, type, row) => {
                        return DefaultValue((row.PhoneAreaCode && row.PhonePrefix && row.PhoneSuffix) ?
                            `(${row.PhoneAreaCode}) ${row.PhonePrefix}-${row.PhoneSuffix} ${row.PhoneExtension ? `+${row.PhoneExtension}` : ''}` :
                            null);
                    }
                }
            ],
            order: [
                [2, 'asc'],
                [0, 'desc']
            ]
        });


        gridElement.style.opacity = 1;
    });
</script>

</html>